import{u as p,a as x,d as b,j as e,L as g}from"./index-DYuqXGVB.js";import{z as t,u as h,a as f,F as j,T as o}from"./zod-Dz4CDlwc.js";import"./select-input-DAMwhWjz.js";import{P as l,T as w}from"./password-field-DUI3jxbr.js";import{i as v}from"./isValidURL-CXYh_dqB.js";import"./createLucideIcon-BImb0yJG.js";const F=t.object({name:t.string().min(1,{message:"Field cannot be empty"}),email:t.email(),password:t.string().min(1,{message:"Field cannot be empty"}),repeat_password:t.string().min(1,{message:"Field cannot be empty"}),avatar:t.string().superRefine((s,r)=>{v(s)||r.addIssue({code:"custom",message:"The valid URLs is required",path:[]})})}).refine(s=>s.password===s.repeat_password,{message:"Passwords must match",path:["repeat_password"]}),S=()=>{const{handleSubmit:s,setError:r,control:a,formState:{errors:i,isSubmitting:n}}=h({defaultValues:{name:"",email:"",password:"",repeat_password:"",avatar:""},resolver:f(F)}),c=p(),m=x(),d=m.state==="loading"||m.state==="submitting"||n;return{handleSubmit:s,submitHandler:async u=>{try{await b(u),c("/login")}catch{r("root",{message:"New user could not be created"})}},control:a,isSubmitting:d,errors:i}},N=()=>{const{handleSubmit:s,submitHandler:r,control:a,isSubmitting:i,errors:n}=S();return e.jsxs(j,{onSubmit:s(r),isSubmitting:i,children:[e.jsx(o,{label:"Name",name:"name",control:a}),e.jsx(o,{label:"E-mail",name:"email",control:a}),e.jsx(l,{label:"Password",name:"password",control:a}),e.jsx(l,{label:"Repeat password",name:"repeat_password",control:a}),e.jsx(o,{label:"Avatar",name:"avatar",control:a}),n.root&&e.jsx("span",{className:"text-red-600 font-semibold text-sm",children:n.root.message})]})},H=()=>e.jsxs("div",{className:"flex flex-col justify-center items-center",children:[e.jsx(w,{className:"size-12 text-amber-500 mb-2"}),e.jsx("h1",{className:"text-4xl font-bold text-center mb-14",children:"oneRail e-commerce"}),e.jsx("h2",{className:"text-2xl font-semibold text-center mb-8",children:"Create a new account"}),e.jsx(N,{}),e.jsxs("div",{className:"mt-6 text-base flex flex-col items-center",children:[e.jsx("p",{children:"Already have an account?"}),e.jsx(g,{to:"/login",className:"font-semibold hover:text-amber-500",children:"Log in"})]})]});export{H as default};
