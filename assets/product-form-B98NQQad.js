import{j as e,r as y,A as j}from"./index-DbYfRmLr.js";import{u as m,c as v,z as l,S,B as w,a as I,b as N,T as p}from"./zod-Dw3J8MQP.js";import{c as F}from"./createLucideIcon-CxIGGbFk.js";/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],R=F("trash",k);function T({name:t,control:a,...i}){const{field:n,fieldState:s}=m({name:t,control:a});return e.jsx(v,{...n,className:"resize-none",...i,error:s.error?.message})}function A(t){try{return new URL(t),!0}catch{return!1}}const C=l.object({title:l.string().min(1,{error:"Field cannot be empty"}),description:l.string().min(1,{error:"Field cannot be empty"}),price:l.coerce.number().int().min(1).max(9999),categoryId:l.number().int().min(1),images:l.array(l.string()).superRefine((t,a)=>{(t.filter(n=>!A(n)).length>0||!t.length)&&a.addIssue({code:"custom",message:"One or more valid URLs is required",path:[]})})});function P({name:t,options:a,control:i,...n}){const{field:s,fieldState:o}=m({name:t,control:i});return e.jsx(S,{options:a,...s,...n,error:o.error?.message})}function E({name:t,label:a,control:i,...n}){const[s,o]=y.useState(""),{field:{value:c=[],onChange:d,...u},fieldState:x}=m({name:t,control:i}),b=()=>{const r=s.trim();r&&!c.includes(r)&&(d([...c,r]),o(""))},g=r=>{d(c.filter(f=>f!==r))},h=r=>{r.key==="Enter"&&(r.preventDefault(),b())};return e.jsxs("div",{children:[e.jsx(w,{...n,...u,value:s,onChange:r=>o(r.target.value),onKeyDown:h,label:a,error:x.error?.message}),e.jsx("h4",{children:"URLs list:"}),e.jsx("ul",{className:"mt-2",children:c?.map(r=>e.jsxs("li",{className:"w-full flex text-sm bg-[var(--light-bg)] rounded-full px-3 py-2 items-center justify-between gap-4 mb-4",children:[e.jsx("span",{className:"w-full truncate",children:r}),e.jsx("button",{type:"button",className:"hover:cursor-pointer hover:text-amber-500 ",onClick:()=>g(r),children:e.jsx(R,{className:"size-4"})})]},r))})]})}const z=({product:t,categories:a})=>{const{handleSubmit:i,setError:n,control:s,formState:{isSubmitting:o}}=I({defaultValues:{title:t?.title||"",price:t?.price||1,categoryId:t?.categoryId||1,description:t?.description||"",images:t?.images||[]},resolver:N(C)}),c=async d=>{(await fetch(j+"/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)})).ok||n("root",{message:"You could not be authorized"})};return e.jsxs("form",{className:"w-[80%] mx-auto md:w-[600px] bg-[var(--dark-bg)] backdrop-blur-xs flex flex-col gap-2 sm:gap-6 px-8 py-8 sm:px-12 rounded-2xl shadow-xl items-stretch",onSubmit:i(c),children:[e.jsx(p,{label:"Title",name:"title",control:s}),e.jsx(p,{label:"Price",name:"price",control:s}),e.jsx(T,{label:"Description",name:"description",control:s,rows:5}),e.jsx(P,{label:"Category",name:"categoryId",control:s,options:a}),e.jsx(E,{label:"Images",name:"images",control:s}),e.jsx("button",{type:"submit",disabled:o,className:"px-12 py-3 rounded-4xl bg-gray-300 text-gray-900 font-bold hover:cursor-pointer outline-none focus:bg-amber-500 hover:bg-amber-500 hover:text-gray-100 disabled:opacity-50 disabled:pointer-events-none transition-all active:scale-95",children:o?"Submitting...":"Submit"})]})};export{z as P};
