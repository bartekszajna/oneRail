import{u as p,a as g,d as b,j as e}from"./index-BIWb99zH.js";import{z as t,u as x,a as h,F as f,T as o}from"./zod-CGfnChNc.js";import{P as l,T as j}from"./password-field-BaxylB7l.js";import{i as w}from"./isValidURL-CXYh_dqB.js";import"./createLucideIcon-C9YSeJfB.js";const F=t.object({name:t.string().min(1,{message:"Field cannot be empty"}),email:t.email(),password:t.string().min(1,{message:"Field cannot be empty"}),repeat_password:t.string().min(1,{message:"Field cannot be empty"}),avatar:t.string().superRefine((s,r)=>{w(s)||r.addIssue({code:"custom",message:"The valid URLs is required",path:[]})})}).refine(s=>s.password===s.repeat_password,{message:"Passwords must match",path:["repeat_password"]}),S=()=>{const{handleSubmit:s,setError:r,control:a,formState:{errors:i,isSubmitting:n}}=x({defaultValues:{name:"",email:"",password:"",repeat_password:"",avatar:""},resolver:h(F)}),c=p(),m=g(),d=m.state==="loading"||m.state==="submitting"||n;return{handleSubmit:s,submitHandler:async u=>{try{await b(u),c("/login")}catch{r("root",{message:"New user could not be created"})}},control:a,isSubmitting:d,errors:i}},v=()=>{const{handleSubmit:s,submitHandler:r,control:a,isSubmitting:i,errors:n}=S();return e.jsxs(f,{onSubmit:s(r),isSubmitting:i,children:[e.jsx(o,{label:"Name",name:"name",control:a}),e.jsx(o,{label:"E-mail",name:"email",control:a}),e.jsx(l,{label:"Password",name:"password",control:a}),e.jsx(l,{label:"Repeat password",name:"repeat_password",control:a}),e.jsx(o,{label:"Avatar",name:"avatar",control:a}),n.root&&e.jsx("span",{className:"text-red-600 font-semibold text-sm",children:n.root.message})]})},E=()=>e.jsxs("main",{className:"min-h-screen flex flex-col gap-2 justify-center items-center my-16",children:[e.jsx(j,{className:"size-12 text-amber-500"}),e.jsx("h1",{className:"text-4xl font-bold text-center mb-12",children:"oneRail e-commerce"}),e.jsx("h2",{className:"text-2xl font-semibold text-center mb-6",children:"Create a new account"}),e.jsx(v,{})]});export{E as default};
