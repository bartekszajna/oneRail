import{r as c,j as e,A as m,L as d}from"./index-DbYfRmLr.js";import{B as u,u as x,z as n,a as b,b as p,T as f}from"./zod-Dw3J8MQP.js";import{c as i}from"./createLucideIcon-CxIGGbFk.js";/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],y=i("eye-off",h);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],j=i("eye",g),S=({error:o,...a})=>{const[s,t]=c.useState(!1);return e.jsx(u,{error:o,...a,type:s?"text":"password",suffix:e.jsx("button",{className:"outline-none focus:text-amber-500 size-4 sm:size-6",type:"button",onClick:()=>t(!s),children:s?e.jsx(y,{className:"size-full"}):e.jsx(j,{className:"size-full"})})})};function w({name:o,control:a,...s}){const{field:t,fieldState:r}=x({name:o,control:a});return e.jsx(S,{...t,...s,error:r.error?.message})}const N=n.object({email:n.email(),password:n.string().min(1,{message:"Field cannot be empty"})}),k=()=>{const{handleSubmit:o,setError:a,control:s,formState:{errors:t,isSubmitting:r}}=b({defaultValues:{email:"",password:""},resolver:p(N)});return{handleSubmit:o,submitHandler:async l=>{(await fetch(m+"/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)})).ok||a("root",{message:"You could not be authorized"})},control:s,isSubmitting:r,errors:t}},T=()=>{const{handleSubmit:o,submitHandler:a,control:s,isSubmitting:t,errors:r}=k();return e.jsxs("main",{className:"min-h-screen flex flex-col gap-7 justify-center items-center",children:[e.jsx("h1",{className:"mb-6",children:"oneRail e-commerce"}),e.jsxs("form",{className:"bg-[var(--dark-bg)] w-[80%] mx-auto md:w-[600px] backdrop-blur-xs flex flex-col gap-8 px-8 py-8 sm:px-12 rounded-2xl shadow-xl items-stretch",onSubmit:o(a),children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Sign in"}),e.jsx(f,{label:"E-mail",name:"email",control:s}),e.jsx(w,{label:"Password",name:"password",control:s}),e.jsx("button",{type:"submit",disabled:t,className:"px-8 py-2 sm:px-12 sm:py-3 rounded-full bg-gray-300 text-gray-900 font-bold hover:cursor-pointer outline-none focus:bg-amber-500 hover:bg-amber-500 hover:text-gray-100 disabled:opacity-50 disabled:pointer-events-none transition-all active:scale-95",children:t?"Submitting...":"Submit"}),e.jsx(d,{to:"/products",children:"GO TO PRODUCTS"}),r.root&&e.jsx("span",{className:"text-red-600 font-semibold text-sm",children:r.root.message})]})]})};export{T as default};
