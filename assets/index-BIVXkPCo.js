import{r as u,j as e,a as d,u as x,s as f,b as p,L as b}from"./index-CJ33uSs8.js";import{B as h,u as y,z as r,a as j,b as g,F as S,T as k}from"./zod-DPXgnS-f.js";import{c}from"./createLucideIcon-DmVWskca.js";/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],N=c("eye-off",w);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],z=c("eye",F),E=({error:t,...a})=>{const[s,o]=u.useState(!1);return e.jsx(h,{error:t,...a,type:s?"text":"password",suffix:e.jsx("button",{className:"outline-none focus:text-amber-500 size-4 sm:size-6",type:"button",onClick:()=>o(!s),children:s?e.jsx(N,{className:"size-full"}):e.jsx(z,{className:"size-full"})})})};function T({name:t,control:a,...s}){const{field:o,fieldState:n}=y({name:t,control:a});return e.jsx(E,{...o,...s,error:n.error?.message})}const _=r.object({email:r.email(),password:r.string().min(1,{message:"Field cannot be empty"})});async function v(t){return(await d.post("/auth/login",t)).data}const I=()=>{const{handleSubmit:t,setError:a,control:s,formState:{errors:o,isSubmitting:n}}=j({defaultValues:{email:"",password:""},resolver:g(_)}),l=x();return{handleSubmit:t,submitHandler:async m=>{try{const i=await v(m);f(i.access_token),p(i.refresh_token),l("/products")}catch{a("root",{message:"You could not be authorized"})}},control:s,isSubmitting:n,errors:o}},L=()=>{const{handleSubmit:t,submitHandler:a,control:s,isSubmitting:o,errors:n}=I();return e.jsxs(S,{onSubmit:t(a),isSubmitting:o,children:[e.jsx(k,{label:"E-mail",name:"email",control:s}),e.jsx(T,{label:"Password",name:"password",control:s}),e.jsx(b,{to:"/products",children:"GO TO PRODUCTS"}),n.root&&e.jsx("span",{className:"text-red-600 font-semibold text-sm",children:n.root.message})]})},H=()=>e.jsxs("main",{className:"min-h-screen flex flex-col gap-7 justify-center items-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-center",children:"Sign in"}),e.jsx(L,{})]});export{H as default};
